<?xml version="1.0"?>
<h:html xmlns="http://www.w3.org/2002/xforms" xmlns:ev="http://www.w3.org/2001/xml-events" xmlns:h="http://www.w3.org/1999/xhtml" xmlns:jr="http://openrosa.org/javarosa" xmlns:orx="http://openrosa.org/xforms" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <h:head>
    <h:title>SCDSC Investigation</h:title>
    <model>
      <instance>
        <scdsc_investigation delimiter="#" id="SCDSC_INVESTIGATION" prefix="J1!SCDSC_INVESTIGATION!" version="2019-09-05">
          <patient_id/>
          <signal_id/>
          <scdc_informed_date/>
          <investigation_start_date/>
          <event_start_date/>
          <signs_symptoms/>
          <cause_known/>
          <cause/>
          <lab_results_known/>
          <collected_lab_samples/>
          <no_people_exposed/>
          <no_human_cases/>
          <no_human_cases_hospitalized/>
          <no_human_deaths/>
          <no_animals_exposed/>
          <no_sick_animals/>
          <no_dead_animals/>
          <new_cases_initial_area/>
          <new_cases_new_areas/>
          <setting_promotes_spread/>
          <additional_info/>
          <group_event_measures>
            <event_measures/>
            <human_attack_rate/>
            <n_human_attack_rate/>
            <human_hospitalization_rate/>
            <n_human_hospitalization_rate/>
            <human_case_fatality_rate/>
            <n_human_case_fatality_rate/>
            <animal_attack_rate/>
            <n_animal_attack_rate/>
            <animal_case_fatality_rate/>
            <n_animal_case_fatality_rate/>
          </group_event_measures>
          <event_risk_classificaiton/>
          <response_recommedations/>
          <response_start_date/>
          <meta>
            <instanceID/>
          </meta>
        </scdsc_investigation>
      </instance>
      <bind calculate=" /scdsc_investigation/signal_id " nodeset="/scdsc_investigation/patient_id" type="string"/>
      <bind constraint="regex(.,'^[0-9]{5,13}$')" jr:constraintMsg="The signal ID should be a 5 to 13 digit number. Kindly enter a valid signal ID." nodeset="/scdsc_investigation/signal_id" required="true()" type="string"/>
      <bind constraint=". &lt;= today() and (decimal-date-time(today()) - decimal-date-time(.)) &lt;= 90" jr:constraintMsg="Kindly select a date that is not be in the future and not more than 3 months ago." nodeset="/scdsc_investigation/scdc_informed_date" required="true()" type="date"/>
      <bind constraint=". &lt;= today() and (decimal-date-time(today()) - decimal-date-time(.)) &lt;= 90" jr:constraintMsg="Kindly select a date that is not be in the future and not more than 3 months ago." nodeset="/scdsc_investigation/investigation_start_date" required="true()" type="date"/>
      <bind constraint=". &lt;= today() and (decimal-date-time(today()) - decimal-date-time(.)) &lt;= 90" jr:constraintMsg="Kindly select a date that is not be in the future and not more than 3 months ago." nodeset="/scdsc_investigation/event_start_date" required="true()" type="dateTime"/>
      <bind nodeset="/scdsc_investigation/signs_symptoms" required="true()" type="string"/>
      <bind nodeset="/scdsc_investigation/cause_known" required="true()" type="select1"/>
      <bind nodeset="/scdsc_investigation/cause" relevant=" /scdsc_investigation/cause_known  = 'yes'" required="true()" type="string"/>
      <bind nodeset="/scdsc_investigation/lab_results_known" relevant=" /scdsc_investigation/cause_known  = 'yes'" required="true()" type="select1"/>
      <bind nodeset="/scdsc_investigation/collected_lab_samples" relevant=" /scdsc_investigation/cause_known  = 'no' or  /scdsc_investigation/lab_results_known  = 'no'" required="true()" type="select1"/>
      <bind nodeset="/scdsc_investigation/no_people_exposed" required="true()" type="int"/>
      <bind constraint=". &lt;=  /scdsc_investigation/no_people_exposed " jr:constraintMsg="Number of human cases cannot be more than number of people exposed." nodeset="/scdsc_investigation/no_human_cases" required="true()" type="int"/>
      <bind constraint=". &lt;=  /scdsc_investigation/no_human_cases " jr:constraintMsg="Number of human cases hospitalized cannot be more than number of human cases." nodeset="/scdsc_investigation/no_human_cases_hospitalized" required="true()" type="int"/>
      <bind constraint=". &lt;=  /scdsc_investigation/no_human_cases " jr:constraintMsg="Number of human deaths cannot be more than number of human cases." nodeset="/scdsc_investigation/no_human_deaths" required="true()" type="int"/>
      <bind nodeset="/scdsc_investigation/no_animals_exposed" required="true()" type="int"/>
      <bind constraint=". &lt;=  /scdsc_investigation/no_animals_exposed " jr:constraintMsg="Number of sick animals cannot be more than number of animals exposed." nodeset="/scdsc_investigation/no_sick_animals" required="true()" type="int"/>
      <bind constraint=". &lt;=  /scdsc_investigation/no_sick_animals " jr:constraintMsg="Number of dead animals cannot be more than number of sick animals." nodeset="/scdsc_investigation/no_dead_animals" required="true()" type="int"/>
      <bind nodeset="/scdsc_investigation/new_cases_initial_area" required="true()" type="select1"/>
      <bind nodeset="/scdsc_investigation/new_cases_new_areas" required="true()" type="select1"/>
      <bind nodeset="/scdsc_investigation/setting_promotes_spread" required="true()" type="select1"/>
      <bind nodeset="/scdsc_investigation/additional_info" required="false()" type="string"/>
      <bind nodeset="/scdsc_investigation/group_event_measures/event_measures" readonly="true()" type="string"/>
      <bind calculate="if( /scdsc_investigation/no_human_cases  = 0 or  /scdsc_investigation/no_people_exposed  = 0, 0, round(( /scdsc_investigation/no_human_cases  div  /scdsc_investigation/no_people_exposed ) * 100, 2))" nodeset="/scdsc_investigation/group_event_measures/human_attack_rate" relevant=" /scdsc_investigation/no_people_exposed  &gt; 0" type="string"/>
      <bind nodeset="/scdsc_investigation/group_event_measures/n_human_attack_rate" readonly="true()" relevant=" /scdsc_investigation/no_people_exposed  &gt; 0" type="string"/>
      <bind calculate="if( /scdsc_investigation/no_human_cases_hospitalized  = 0 or  /scdsc_investigation/no_human_cases  = 0, 0, round(( /scdsc_investigation/no_human_cases_hospitalized  div  /scdsc_investigation/no_human_cases ) * 100, 2))" nodeset="/scdsc_investigation/group_event_measures/human_hospitalization_rate" relevant=" /scdsc_investigation/no_people_exposed  &gt; 0" type="string"/>
      <bind nodeset="/scdsc_investigation/group_event_measures/n_human_hospitalization_rate" readonly="true()" relevant=" /scdsc_investigation/no_people_exposed  &gt; 0" type="string"/>
      <bind calculate="if( /scdsc_investigation/no_human_deaths  = 0 or  /scdsc_investigation/no_human_cases  = 0, 0, round(( /scdsc_investigation/no_human_deaths  div  /scdsc_investigation/no_human_cases ) * 100, 2))" nodeset="/scdsc_investigation/group_event_measures/human_case_fatality_rate" relevant=" /scdsc_investigation/no_people_exposed  &gt; 0" type="string"/>
      <bind nodeset="/scdsc_investigation/group_event_measures/n_human_case_fatality_rate" readonly="true()" relevant=" /scdsc_investigation/no_people_exposed  &gt; 0" type="string"/>
      <bind calculate="if( /scdsc_investigation/no_sick_animals  = 0 or  /scdsc_investigation/no_animals_exposed  = 0, 0, round(( /scdsc_investigation/no_sick_animals  div  /scdsc_investigation/no_animals_exposed ) * 100, 2))" nodeset="/scdsc_investigation/group_event_measures/animal_attack_rate" relevant=" /scdsc_investigation/no_animals_exposed  &gt; 0" type="string"/>
      <bind nodeset="/scdsc_investigation/group_event_measures/n_animal_attack_rate" readonly="true()" relevant=" /scdsc_investigation/no_animals_exposed  &gt; 0" type="string"/>
      <bind calculate="if( /scdsc_investigation/no_dead_animals  = 0 or  /scdsc_investigation/no_sick_animals  = 0, 0, round(( /scdsc_investigation/no_dead_animals  div  /scdsc_investigation/no_sick_animals ) * 100, 2))" nodeset="/scdsc_investigation/group_event_measures/animal_case_fatality_rate" relevant=" /scdsc_investigation/no_animals_exposed  &gt; 0" type="string"/>
      <bind nodeset="/scdsc_investigation/group_event_measures/n_animal_case_fatality_rate" readonly="true()" relevant=" /scdsc_investigation/no_animals_exposed  &gt; 0" type="string"/>
      <bind nodeset="/scdsc_investigation/event_risk_classificaiton" required="true()" type="select1"/>
      <bind nodeset="/scdsc_investigation/response_recommedations" required="true()" type="select"/>
      <bind constraint=". &lt;= today() and (decimal-date-time(today()) - decimal-date-time(.)) &lt;= 90" jr:constraintMsg="Kindly select a date that is not be in the future and not more than 3 months ago." nodeset="/scdsc_investigation/response_start_date" required="true()" type="date"/>
      <bind calculate="concat('uuid:', uuid())" nodeset="/scdsc_investigation/meta/instanceID" readonly="true()" type="string"/>
    </model>
  </h:head>
  <h:body class="pages">
    <input appearance="numbers" ref="/scdsc_investigation/signal_id">
      <label>Signal ID</label>
    </input>
    <input appearance="no-calendar" ref="/scdsc_investigation/scdc_informed_date">
      <label>When was the SCDSC informed?</label>
    </input>
    <input appearance="no-calendar" ref="/scdsc_investigation/investigation_start_date">
      <label>When did the investigation by Sub county begin/start?</label>
    </input>
    <input appearance="no-calendar" ref="/scdsc_investigation/event_start_date">
      <label>When did the event start?</label>
    </input>
    <input ref="/scdsc_investigation/signs_symptoms">
      <label>What are the signs and symptoms that are being reported?</label>
    </input>
    <select1 ref="/scdsc_investigation/cause_known">
      <label>Is the cause of the event known?</label>
      <item>
        <label>Yes</label>
        <value>yes</value>
      </item>
      <item>
        <label>No</label>
        <value>no</value>
      </item>
    </select1>
    <input ref="/scdsc_investigation/cause">
      <label>What is the cause?</label>
    </input>
    <select1 ref="/scdsc_investigation/lab_results_known">
      <label>Are laboratory results known?</label>
      <item>
        <label>Yes</label>
        <value>yes</value>
      </item>
      <item>
        <label>No</label>
        <value>no</value>
      </item>
    </select1>
    <select1 ref="/scdsc_investigation/collected_lab_samples">
      <label>Have laboratory samples been collected?</label>
      <item>
        <label>Yes</label>
        <value>yes</value>
      </item>
      <item>
        <label>No</label>
        <value>no</value>
      </item>
      <item>
        <label>Not applicable</label>
        <value>not_applicable</value>
      </item>
    </select1>
    <input ref="/scdsc_investigation/no_people_exposed">
      <label>Number of people exposed</label>
    </input>
    <input ref="/scdsc_investigation/no_human_cases">
      <label>Number of human cases</label>
    </input>
    <input ref="/scdsc_investigation/no_human_cases_hospitalized">
      <label>Number of human cases hospitalized</label>
    </input>
    <input ref="/scdsc_investigation/no_human_deaths">
      <label>Number of human deaths</label>
    </input>
    <input ref="/scdsc_investigation/no_animals_exposed">
      <label>Number of animals exposed</label>
    </input>
    <input ref="/scdsc_investigation/no_sick_animals">
      <label>Number of sick animals</label>
    </input>
    <input ref="/scdsc_investigation/no_dead_animals">
      <label>Number of dead animals</label>
    </input>
    <select1 ref="/scdsc_investigation/new_cases_initial_area">
      <label>Are new cases still being reported from the initial area?</label>
      <item>
        <label>Yes</label>
        <value>yes</value>
      </item>
      <item>
        <label>No</label>
        <value>no</value>
      </item>
      <item>
        <label>Not applicable</label>
        <value>not_applicable</value>
      </item>
    </select1>
    <select1 ref="/scdsc_investigation/new_cases_new_areas">
      <label>Are new cases being reported from new areas?</label>
      <item>
        <label>Yes</label>
        <value>yes</value>
      </item>
      <item>
        <label>No</label>
        <value>no</value>
      </item>
      <item>
        <label>Not applicable</label>
        <value>not_applicable</value>
      </item>
    </select1>
    <select1 ref="/scdsc_investigation/setting_promotes_spread">
      <label>Does the event setting promote spread?</label>
      <item>
        <label>Yes</label>
        <value>yes</value>
      </item>
      <item>
        <label>No</label>
        <value>no</value>
      </item>
      <item>
        <label>Not applicable</label>
        <value>not_applicable</value>
      </item>
    </select1>
    <input ref="/scdsc_investigation/additional_info">
      <label>Please provide any additional information on the event</label>
    </input>
    <group appearance="field-list" ref="/scdsc_investigation/group_event_measures">
      <input ref="/scdsc_investigation/group_event_measures/event_measures">
        <label>Event measures</label>
      </input>
      <input ref="/scdsc_investigation/group_event_measures/n_human_attack_rate">
        <label>Attack rate (human):
<output value=" /scdsc_investigation/group_event_measures/human_attack_rate "/> %</label>
      </input>
      <input ref="/scdsc_investigation/group_event_measures/n_human_hospitalization_rate">
        <label>Hospitalization rate (human):
<output value=" /scdsc_investigation/group_event_measures/human_hospitalization_rate "/> %</label>
      </input>
      <input ref="/scdsc_investigation/group_event_measures/n_human_case_fatality_rate">
        <label>Case fatality rate (CFR) (human):
<output value=" /scdsc_investigation/group_event_measures/human_case_fatality_rate "/> %</label>
      </input>
      <input ref="/scdsc_investigation/group_event_measures/n_animal_attack_rate">
        <label>Attack rates (animals): 
<output value=" /scdsc_investigation/group_event_measures/animal_attack_rate "/> %</label>
      </input>
      <input ref="/scdsc_investigation/group_event_measures/n_animal_case_fatality_rate">
        <label>Case fatality rate (CFR) (animal):
<output value=" /scdsc_investigation/group_event_measures/animal_case_fatality_rate "/> %</label>
      </input>
    </group>
    <select1 ref="/scdsc_investigation/event_risk_classificaiton">
      <label>How would you classify the risk of the event?</label>
      <hint>(consider diagnosis, setting and measures)</hint>
      <item>
        <label>Very High Risk</label>
        <value>very_high</value>
      </item>
      <item>
        <label>High Risk</label>
        <value>high</value>
      </item>
      <item>
        <label>Moderate Risk</label>
        <value>moderate</value>
      </item>
      <item>
        <label>Low Risk</label>
        <value>low</value>
      </item>
      <item>
        <label>Very Low Risk</label>
        <value>very_low</value>
      </item>
    </select1>
    <select ref="/scdsc_investigation/response_recommedations">
      <label>What are the recommended response activities ?</label>
      <hint>(Tick all that apply)</hint>
      <item>
        <label>Escalate response to county level</label>
        <value>escalate_to_county</value>
      </item>
      <item>
        <label>Deploy Sub County RRT</label>
        <value>deploy_sub_county_rrt</value>
      </item>
      <item>
        <label>Advanced investigation</label>
        <value>advance_investigation</value>
      </item>
      <item>
        <label>Enhanced surveillance</label>
        <value>enhanced_surveillance</value>
      </item>
      <item>
        <label>Monitor</label>
        <value>monitor</value>
      </item>
      <item>
        <label>Discard</label>
        <value>discard</value>
      </item>
    </select>
    <input appearance="no-calendar" ref="/scdsc_investigation/response_start_date">
      <label>When did response start</label>
    </input>
  </h:body>
</h:html>
